<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- Bootstrap CSS -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous"
    />




    <!--Fontawesome-most popular icon set and toolkit-->
    <script defer src="resources/fontawesome/js/solid.js"></script>
    <script defer src="resources/fontawesome/js/fontawesome.js"></script>

    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="stylesheet" type="text/css" href="table.css"/>

    <script src="resources/jquery/jquery.js"></script>
    <script src="resources/bootstrap/js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="resources/datatable/css/datatables.min.css">

    <!--    select2-->
    <link rel="stylesheet" href="resources/select2/css/select2.min.css">
    <script src="resources/select2/js/select2.min.js"></script>
    <script src="resources/script/sweetalert.min.js"></script>


    <script src="resources/datatable/js/datatables.min.js"></script>
    <script src="resources/script/innertablefunctions.js"></script>
    <script src="resources/script/common.bitproject.js"></script>
    <script src="customertable.js"></script>
    <!--    <link rel="stylesheet" href="resources/style/common.css">-->


    <title>Hello,Gamage!</title>
    <link rel="icon" type="image/x-icon" href="./resources/image/cart/chef.png">
</head>
<body>
<!--script-->
<script
        type="module"
        src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
></script>
<script
        nomodule
        src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
></script>

<div class="row w-100  ">
    <!--Navigation-->
    <div class="row s1 ">
        <div class="navigation">
            <h2 class="text-white"><span>Ga</span>mage <span>Re</span>staurant</h2>

            <ul>
                <li class="list">
                    <a href="http://localhost:8080/dashboard">
                <span class="icon"
                ><ion-icon name="home-outline"></ion-icon
                ></span>
                        <span class="text"> Home</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                <span class="icon"
                ><ion-icon name="notifications-outline"></ion-icon
                ></span>
                        <span class="text"> Notification</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                <span class="icon"
                ><ion-icon name="settings-outline"></ion-icon
                ></span>
                        <span class="text"> Settings</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                <span class="icon"
                ><ion-icon name="log-out-outline"></ion-icon
                ></span>
                        <span class="text"> Log out</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#" onclick="handalNavigationModel()">
                <span class="icon"
                ><ion-icon name="menu-outline"></ion-icon
                ></span>
                        <span class="text"> Menu</span>
                    </a>
                </li>

                <div class="indicator"></div>
            </ul>
        </div>
    </div>
    <!--Navigation movement-->
    <script>
        const list = document.querySelectorAll(".list");

        function activeLink() {
            list.forEach((item) => item.classList.remove("active"));
            this.classList.add("active");
        }

        list.forEach((item) => item.addEventListener("click", activeLink));
    </script>

    <!--Form-->
    <div class="bgForm">
        <div class="row  text-black ">
            <h3 class="p-3">
              Table allocation Management
            </h3>
        </div>
        <div class="row">
            <pre>

            </pre>
        </div>
        <div class="row m-8  ">
            <div class="col-md-9">
                <div class="row p-3 formcontent" style="background-color: rgba(137,104,143,0.53)" id="divTable">
                    <div class="container-fluid ">
                        <div class="row d-flex align-items-center justify-content-between">

                            <div class="col-md-3">
                                <input type="button" class="btn button  font-weight-bold" value="Print Table"
                                       id="btnPrintTable" onclick="btnPrintTableMC()"/>


                            </div>
                            <div class="col-md-6">
                                <input placeholder="Search"
                                       class="my-3  form-control border border-2 border-dark txtSearchName"
                                       type="text"
                                       id="txtSearchName"/>
                            </div>

                        </div>
                    </div>


                    <div class="table-responsive" id="tableParent"
                         class="table-container m-5" >

                        <script>

                            function getNameColumn(ob) {
                                return ob.callingname + "(" + ob.number + ")";
                            }

                            var metadata = [
                                {
                                    name: 'Tbl Allocation Code',
                                    search: true,
                                    datatype: 'text',
                                    property: 'tableallocationcode'
                                },
                                {name: 'Added Date', search: true, datatype: 'text', property: 'addeddate'},
                                {
                                    name: 'Reserved Date',
                                    search: true,
                                    datatype: 'text',
                                    property: 'reserveddate'
                                },
                                {
                                    name: 'Reserved Time',
                                    search: true,
                                    datatype: 'text',
                                    property: 'reservetime'
                                },

                                {
                                    name: 'Rervation no',
                                    search: true,
                                    datatype: 'text',
                                    property: 'reservation_id.reservationno'
                                },
                                {
                                    name: 'Tbl Status',
                                    search: true,
                                    datatype: 'text',
                                    property: 'tablestatus_id.name'
                                },

                            ];
                            table("tableParent", "tblTableallocation", metadata, true);

                        </script>
                    </div>

                    <div>
                        <div style="display: inline-block ; float: left">
                            <select class="form-control input" id="cmbPageSize"
                                    style="width: 80px;">
                                <option selected value="10">10</option>
                                <option value="15">15</option>
                                <option value="30">30</option>
                                <option value="500">500</option>
                                <option value="1000">1000</option>
                            </select>
                            <script>
                                cmbPageSize.onchange = function chnagePageSize() {
                                    activepage = 1;
                                    btnSearchMC();
                                };
                            </script>
                        </div>
                        <div style="display: inline-block; margin-left: 10px;">
                            <ul id="pagination" class="pagination"></ul>
                        </div>
                    </div>
                </div>


                <!-- Modal View Item -->
                <div class="modal fade" id="dataViewModal" tabindex="-1" role="dialog"
                     aria-labelledby="exampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content ">
                            <div class="modal-header bg-black text-white">
                                <img src="./resources/image/cart/chef.png" width="65" height="65"
                                     class="align-top mx-2" alt="">
                                <h2 class="text-white"><span>Ga</span>mage <span>Re</span>staurant</h2>

                            </div>
                            <div class="modal-body container-print">
                                <table id="tablePrintEmployee"
                                       class=" table table-striped shadow rounded">
                                    <thead class="text-white bg-black ">
                                    <h3> View Table Allocation Details</h3>
                                    </thead>
                                    <div class="modal-body">
                                        <table id="printformtable"
                                               class="mt-5 table table-bordered table-striped"
                                               style="background-color:rgba(153,18,161,0.08) ">
                                            <tbody>
                                            <tr>
                                                <th>Registration No :</th>
                                                <td id="tdRegNo"></td>
                                            </tr>
                                            <tr>
                                                <th>Customer Full Name :</th>
                                                <td id="tdFname"></td>
                                            </tr>
                                            <tr>
                                                <th>Customer Last Name :</th>
                                                <td id="tdLname"></td>
                                            </tr>
                                            <tr>
                                                <th>Customer Mobile No1 :</th>
                                                <td id="tdmno1"></td>
                                            </tr>
                                            <tr>
                                                <th>Customer NIC :</th>
                                                <td id="tdNic"></td>
                                            </tr>
                                            <tr>
                                                <th>Customer Address :</th>
                                                <td id="tdAddress"></td>
                                            </tr>


                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="modal-footer bg-black">
                                        <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Close
                                        </button>
                                        <button type="button" class="btn btn-light"
                                                onclick="btnPrintRowMC()">Print
                                        </button>
                                    </div>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-3 ">


                    <div class="datetime">
                        <div class="time"></div>
                        <div class="date"></div>
                    </div>

                    <script>
                        const timeElement = document.querySelector(".time");
                        const dateElement = document.querySelector(".date");

                        /**
                         * @param {Date} date
                         */
                        function formatTime(date) {
                            const hours12 = date.getHours() % 12 || 12;
                            const minutes = date.getMinutes();
                            const isAm = date.getHours() < 12;

                            return `${hours12
                                .toString()
                                .padStart(2, "0")}:${minutes.toString().padStart(2, "0")} ${
                                isAm ? "AM" : "PM"
                            }`;
                        }

                        /**
                         * @param {Date} date
                         */
                        function formatDate(date) {
                            const DAYS = [
                                "Sunday",
                                "Monday",
                                "Tuesday",
                                "Wednesday",
                                "Thursday",
                                "Friday",
                                "Saturday",
                            ];
                            const MONTHS = [
                                "January",
                                "February",
                                "March",
                                "April",
                                "May",
                                "June",
                                "July",
                                "August",
                                "September",
                                "October",
                                "November",
                                "December",
                            ];

                            return `${DAYS[date.getDay()]}, ${
                                MONTHS[date.getMonth()]
                            } ${date.getDate()} ${date.getFullYear()}`;
                        }

                        setInterval(() => {
                            const now = new Date();

                            timeElement.textContent = formatTime(now);
                            dateElement.textContent = formatDate(now);
                        }, 200);
                    </script>
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5 class="card-title">Table Allocation </h5>
                            <div class="d-flex justify-content-around align-items-center">
                                <img
                                        src="./resources/image/table.png"
                                        width="90px"
                                        height="90px"
                                        alt="employee"
                                />
                                <a

                                        type="button"
                                        class="btn button-view"
                                        data-toggle="modal" data-target="#tnlAllocation"
                                >
                                    Allocation
                                </a>
                            </div>
                        </div>
                    </div>

                </div>

                <!--Table Allocation - Modal -->
                <div class="modal fade" id="tnlAllocation" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-xl" role="document">
                        <div class="modal-content">

                            <div class="modal-body">
                                <!--Form-->
                                <div class="row  text-black  ">
                                    <h2>
                                        Table Allocation Management
                                    </h2>
                                </div>
                                <div class="row m-8 divBody ">
                                    <div class="col-md-9">
                                        <div class=" col-md-12">
                                            <div class="card ">

                                                <div class=" card-body">

                                                    <div class="row ">
                                                        <form class="" id="alocationform" onsubmit="return false">
                                                            <div class="row mt-2">
                                                                <div class="col-md-2"></div>
                                                                <!--form-->
                                                                <div class="col-md-12 p-3">
                                                                    <!--Allocation Code/Reservation/Reserved Date-->
                                                                    <div class="row mt-2 ">
                                                                        <div class="col-md-4">
                                                                            <div class="form-group text-black">
                                                                                <label for="txtTAcode"><b>Allocation Code:
                                                                                    <span style="color: red;">*</span></b></label>
                                                                                <div class="input-group">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           id="txtTAcode"
                                                                                           required
                                                                                    >
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <div class="form-group text-black">
                                                                                <label for="cmbReservation"><b>Reservation: <span
                                                                                        style="color: red;">*</span></b></label>
                                                                                <div class="input-group">
                                                                                    <select id="cmbReservation"
                                                                                            class="form-control"
                                                                                            required
                                                                                            data-toggle="tooltip"
                                                                                            data-placement="bottom"
                                                                                            onchange="comboBoxBinder(cmbReservation,'','tableallocation','reservation_id','oldtableallocation')">
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <div class="form-group text-black ">
                                                                                <label for="txtRRDate"><b>Reserved
                                                                                    date: <span
                                                                                            style="color: red;">*</span></b></label>
                                                                                <div class="input-group">
                                                                                    <input type="date"
                                                                                           class="form-control"
                                                                                           id="txtRRDate"
                                                                                           placeholder="Enter Reserved Date"
                                                                                           required
                                                                                           data-toggle="tooltip"
                                                                                           data-placement="bottom"
                                                                                           title="2022-05-04"
                                                                                           onchange="textFieldBinder(txtRRDate,'^[0-9]{4}[-][0-9]{2}[-][0-9]{2}$','tableallocation','reserveddate','oldstableallocation')"
                                                                                    >
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row mt-2 ">
                                                                        <div class="col-md-4">
                                                                            <div class="form-group text-black">
                                                                                <label for="txtRTime"><b>Reserved Time:
                                                                                    <span style="color: red;">*</span></b></label>
                                                                                <div class="input-group">
                                                                                    <input type="time"
                                                                                           class="form-control"
                                                                                           id="txtRTime"
                                                                                           placeholder="Enter the Time"
                                                                                           required
                                                                                           data-toggle="tooltip"
                                                                                           data-placement="bottom"
                                                                                           title="9.00 AM/PM"
                                                                                           onchange="textFieldBinder(txtRTime,'','tableallocation','reservetime','oldtableallocation')"
                                                                                    >
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <div class="form-group text-black">
                                                                                <label for="cmbTStatus"><b>Table Status: <span
                                                                                        style="color: red;">*</span></b></label>
                                                                                <div class="input-group">
                                                                                    <select id="cmbTStatus"
                                                                                            class="form-control"
                                                                                            required
                                                                                            data-toggle="tooltip"
                                                                                            data-placement="bottom"

                                                                                            onchange="comboBoxBinder(cmbTStatus,'','tableallocation','tablestatus_id','oldtableallocation')">
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <div class="form-group text-black ">
                                                                                <label for="txtGCount"><b>Guest Count:<span
                                                                                        style="color: red;">*</span></b></label>
                                                                                <div class="input-group">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           id="txtGCount"
                                                                                           placeholder="Enter Guest Count"
                                                                                           required
                                                                                           data-toggle="tooltip"
                                                                                           data-placement="bottom"

                                                                                           onchange="textFieldBinder(txtGCount,'^(?!0+$)\\d+$','tableallocation','guestcount','oldstableallocation')"
                                                                                    >
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="card">
                                                                        <div class="card-header headding-inner m-3"
                                                                        >
                                                                            <h4 class="text-black flex justify-content-center">Table Detail</h4>
                                                                        </div>
                                                                        <div class="card-body">
                                                                            <div class="row mt-2 p-3">
                                                                                <div class="col-md-12">

                                                                                    <div class="row">
                                                                                        <div class="col-md-12">
                                                                                            <div class="form-group text-dark ">
                                                                                                <label for="cmbInnerTableDetail"
                                                                                                       class="font-weight-bold"><b>Table
                                                                                                    Detail :
                                                                                                    <span
                                                                                                            style="color: red;">*</span></b>
                                                                                                </label>
                                                                                                <select id="cmbInnerTableDetail"
                                                                                                        class="form-control"
                                                                                                        data-toggle="tooltip"
                                                                                                        data-placement="bottom"
                                                                                                        title="Please select Table detail"
                                                                                                        onchange="comboBoxBinder(cmbInnerTableDetail,'','tableallocationHastabledetail','tableddetail_id','oldtableallocationHastabledetail')"
                                                                                                >
                                                                                                </select>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row mt-3">
                                                                                        <div class="col-md-12">
                                                                                            <div class="text-right">
                                                                                                <button class="btn button-86 "
                                                                                                        type="button"
                                                                                                        id="btnInnerClearT"
                                                                                                        style="width: 25%">
                                                                                                    <i class="fas fa-recycle mr-2"></i>
                                                                                                    Clear
                                                                                                </button>
                                                                                                <button class="btn button-86"
                                                                                                        style="width: 25%" type="button"
                                                                                                        id="btnInnerAddT"
                                                                                                        onclick="btnInnerAddMCT()">
                                                                                                    <i class='fas fa-plus-circle mr-2'></i>Add
                                                                                                </button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Inner table area-->
                                                                            <div class="row mt-3" id="innertableT">

                                                                                <script>
                                                                                    var metadatainner = [

                                                                                        {
                                                                                            name: 'Table detail',
                                                                                            search: true,
                                                                                            datatype: 'text',
                                                                                            property: 'tableddetail_id.nofchairs'
                                                                                        },

                                                                                    ];
                                                                                    tableForInnerForm("innertableT", "tblInnertblAllocation", metadatainner, true);                                                            </script>
                                                                            </div>
                                                                        </div>

                                                                    </div>

                                                                </div>


                                                            </div>
                                                            <div class="col-md-2"></div>


                                                        </form>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 ">

                                        <div class="card mt-4">
                                            <div class="card-body">
                                                <h5 class="card-title">Table allocation History</h5>
                                                <div class="d-flex justify-content-around align-items-center">
                                                    <img
                                                            src="./resources/image/table.png"
                                                            width="90px"
                                                            height="90px"
                                                            alt="tblallocation"
                                                    />
                                                    <a

                                                            type="button"
                                                            class="btn button-view"
                                                            href="http://localhost:8080/tableallocation"
                                                    >
                                                        View History
                                                    </a>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer bg-black">
                                <!--Clear/Update/Delete buttons-->
                                <div class="row mt-2 p-2">
                                    <div class="col-md-12">

                                        <div class="text-right">
                                            <button class="btn button-86 " type="button" id="btnClear1"
                                                    style="width: 25%" >
                                                Clear
                                            </button>
                                            <button class="btn button-86 " type="submit" id="btnUpdate1"
                                                    style="width: 25%">
                                                Update
                                            </button>
                                            <button class="btn button-86" style="width: 25%" type="submit"
                                                    id="btnAdd1">
                                                Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer bg-black">
                                <button type="button" class="btn btn-secondary"
                                        data-dismiss="modal" onclick="window.location.reload()">Close
                                </button>

                            </div>

                        </div>


                    </div>
                </div>

            </div>

        </div>

    </div>
</div>
</body>
</html>
